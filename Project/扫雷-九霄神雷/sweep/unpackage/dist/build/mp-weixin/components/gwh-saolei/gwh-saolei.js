(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/gwh-saolei/gwh-saolei"],{4333:function(t,i,s){"use strict";var a;s.d(i,"b",(function(){return h})),s.d(i,"c",(function(){return e})),s.d(i,"a",(function(){return a}));var h=function(){var t=this,i=t.$createElement,s=(t._self._c,t.getRestBoomNum());t.$mp.data=Object.assign({},{$root:{m0:s}})},e=[]},"5ab4":function(t,i,s){"use strict";var a=s("d189"),h=s.n(a);h.a},a4a9:function(t,i,s){"use strict";s.r(i);var a=s("4333"),h=s("e42c");for(var e in h)"default"!==e&&function(t){s.d(i,t,(function(){return h[t]}))}(e);s("5ab4");var o,n=s("f0c5"),u=Object(n["a"])(h["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);i["default"]=u.exports},b563:function(t,i,s){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s={props:{width:{type:Number,default:8},height:{type:Number,default:8},boomNum:{type:Number,default:10}},watch:{width:function(t){this.initMap()},height:function(t){this.initMap()},boomNum:function(t){this.initMap()}},computed:{classMax:function(){var t=this.mask,i="";return i="mask-".concat(t.length),[i]}},data:function(){return{maps:[],mask:[],booms:[],isGameOver:!1,isGameSuccess:!1,lastAction:"",quiet:!1}},created:function(){this.initMusic(),this.playStart()},mounted:function(){this.initMap()},beforeUnmount:function(){console.log("unmount")},methods:{getRestBoomNum:function(){try{for(var t=0,i=0,s=0;s<this.width;s++)for(var a=0;a<this.height;a++)-1==this.mask[s][a]&&t++,1==this.mask[s][a]&&i++;return this.$nextTick((function(){if(i+this.booms.length==this.width*this.height&&!this.isGameSuccess){this.isGameSuccess=!0;for(var t=0;t<this.width;t++)for(var s=0;s<this.height;s++)0==this.mask[t][s]&&-1==this.maps[t][s]&&(this.mask[t][s]=-1);this.$forceUpdate(),this.$emit("result",{code:0,msg:"success"})}})),this.booms.length-t}catch(h){return this.boomNum}},initMap:function(){this.maps=[],this.mask=[],this.isGameOver=!1,this.isGameSuccess=!1,this.booms=[];for(var t=0;t<this.width;t++){this.maps.push([]),this.mask.push([]);for(var i=0;i<this.height;i++)this.maps[t].push(0),this.mask[t].push(0)}var s=[];while(s.length<this.boomNum){for(var a=[parseInt(Math.random()*this.width),parseInt(Math.random()*this.height)],h=!1,e=0;e<s.length;e++)if(s[e][0]==a[0]&&s[e][1]==a[1]){h=!0;break}h||(s.push(a),this.maps[a[0]][a[1]]=-1)}this.booms=s;for(var o=0;o<this.width;o++)for(var n=0;n<this.height;n++)if(-1!==this.maps[o][n]){var u=0;o>0&&(n>0&&-1==this.maps[o-1][n-1]&&u++,-1==this.maps[o-1][n]&&u++,n<this.height-1&&-1==this.maps[o-1][n+1]&&u++),o<this.width-1&&(n>0&&-1==this.maps[o+1][n-1]&&u++,-1==this.maps[o+1][n]&&u++,n<this.height-1&&-1==this.maps[o+1][n+1]&&u++),n>0&&-1==this.maps[o][n-1]&&u++,n<this.height-1&&-1==this.maps[o][n+1]&&u++,this.maps[o][n]=u}this.$emit("init",{maps:this.maps}),console.log(this.booms,this.maps)},initMusic:function(){var i=this;!this.startAudio&&(this.startAudio=t.createInnerAudioContext()),this.startAudio.src="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-3c5dd365-9db5-4687-8b00-e7c4a23710e1/d53274e0-321b-4e55-9ebc-e4dd86ef3e9b.mp3",!this.didaAudio&&(this.didaAudio=t.createInnerAudioContext()),this.didaAudio.loop=!0,this.didaAudio.src="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-3c5dd365-9db5-4687-8b00-e7c4a23710e1/edbc4906-940d-4add-b99b-94f014525cdc.mp3",this.startAudio.onEnded((function(){i.playDida()})),!this.flagAudio&&(this.flagAudio=t.createInnerAudioContext()),this.flagAudio.src="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-3c5dd365-9db5-4687-8b00-e7c4a23710e1/a0a4d7c4-1b53-4554-9e71-7c79844458b8.wav",!this.boomAudio&&(this.boomAudio=t.createInnerAudioContext()),this.boomAudio.src="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-3c5dd365-9db5-4687-8b00-e7c4a23710e1/d9ce405b-9410-4595-939b-7207cb8e2f72.mp3",!this.normalAudio&&(this.normalAudio=t.createInnerAudioContext()),this.normalAudio.src="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-3c5dd365-9db5-4687-8b00-e7c4a23710e1/4b6ffade-9811-43e6-b378-fefc879e49b9.mp3"},switchMusic:function(){this.quiet=!this.quiet;var t=Number(!this.quiet);this.startAudio.volume=t,this.didaAudio.volume=t,this.flagAudio.volume=t,this.boomAudio.volume=t},playStart:function(){this.startAudio.play()},playDida:function(){this.didaAudio.play()},pauseDida:function(){this.didaAudio.pause()},playFlag:function(){this.flagAudio.play()},playBoom:function(){this.boomAudio.play()},playNormal:function(){this.normalAudio.play()},setMask:function(t,i,s){if(this.lastAction=s,!this.isGameOver&&!this.isGameSuccess)if("open"===s)if(-1===this.maps[t][i]){for(var a=0;a<this.booms.length;a++){var h=this.booms[a];-1!=this.mask[h[0]][h[1]]&&(this.mask[h[0]][h[1]]=1)}console.log(this.mask),this.isGameOver=!0,this.startAudio.pause(),this.pauseDida(),this.playBoom();for(var e=0;e<this.width;e++)for(var o=0;o<this.height;o++)-1==this.mask[e][o]&&-1!=this.maps[e][o]&&(this.mask[e][o]=2);this.$forceUpdate(),this.$emit("result",{code:-1,msg:"failed"})}else this.playNormal(),this.canIOpen(t,i),console.log(this.mask);else this.playFlag(),0==this.mask[t][i]?this.mask[t][i]=-1:-1==this.mask[t][i]&&(this.mask[t][i]=0),this.$nextTick((function(){this.$forceUpdate()}))},canIOpen:function(t,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("open"==this.lastAction)if(-1!=this.maps[t][i]){this.mask[t][i]=1;var a=0;t>0&&(i>0&&-1==this.mask[t-1][i-1]&&a++,-1==this.mask[t-1][i]&&a++,i<this.height-1&&-1==this.mask[t-1][i+1]&&a++),t<this.width-1&&(i>0&&-1==this.mask[t+1][i-1]&&a++,-1==this.mask[t+1][i]&&a++,i<this.height-1&&-1==this.mask[t+1][i+1]&&a++),i>0&&-1==this.mask[t][i-1]&&a++,i<this.height-1&&-1==this.mask[t][i+1]&&a++,this.maps[t][i]<=a&&-1!=this.maps[t][i]&&(t>0&&(i>0&&0==this.mask[t-1][i-1]&&this.canIOpen(t-1,i-1,s+1),0==this.mask[t-1][i]&&this.canIOpen(t-1,i,s+1),i<this.height-1&&0==this.mask[t-1][i+1]&&this.canIOpen(t-1,i+1,s+1)),t<this.width-1&&(i>0&&0==this.mask[t+1][i-1]&&this.canIOpen(t+1,i-1,s+1),0==this.mask[t+1][i]&&this.canIOpen(t+1,i,s+1),i<this.height-1&&0==this.mask[t+1][i+1]&&this.canIOpen(t+1,i+1,s+1)),i>0&&0==this.mask[t][i-1]&&this.canIOpen(t,i-1,s+1),i<this.height-1&&0==this.mask[t][i+1]&&this.canIOpen(t,i+1,s+1)),this.$set(this,"mask",this.mask),this.$forceUpdate()}else s<=1&&this.setMask(t,i,"open")}}};i.default=s}).call(this,s("543d")["default"])},d189:function(t,i,s){},e42c:function(t,i,s){"use strict";s.r(i);var a=s("b563"),h=s.n(a);for(var e in a)"default"!==e&&function(t){s.d(i,t,(function(){return a[t]}))}(e);i["default"]=h.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/gwh-saolei/gwh-saolei-create-component',
    {
        'components/gwh-saolei/gwh-saolei-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("a4a9"))
        })
    },
    [['components/gwh-saolei/gwh-saolei-create-component']]
]);
